/**
 * 15. ä¸‰æ•°ä¹‹å’Œ (3Sum)
 * https://leetcode.cn/problems/3sum/
 *
 * é¢˜ç›®æè¿°:
 * ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums ï¼Œåˆ¤æ–­æ˜¯å¦å­˜åœ¨ä¸‰å…ƒç»„ [nums[i], nums[j], nums[k]] æ»¡è¶³ i != jã€i != k ä¸” j != k ï¼ŒåŒæ—¶è¿˜æ»¡è¶³ nums[i] + nums[j] + nums[k] == 0 ã€‚è¯·ä½ è¿”å›æ‰€æœ‰å’Œä¸º 0 ä¸”ä¸é‡å¤çš„ä¸‰å…ƒç»„ã€‚
 * æ³¨æ„ï¼šç­”æ¡ˆä¸­ä¸å¯ä»¥åŒ…å«é‡å¤çš„ä¸‰å…ƒç»„ã€‚
 * 
 * ç¤ºä¾‹ 1ï¼š
 * è¾“å…¥ï¼šnums = [-1,0,1,2,-1,-4]
 * è¾“å‡ºï¼š[[-1,-1,2],[-1,0,1]]
 * è§£é‡Šï¼š
 * nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 ã€‚
 * nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 ã€‚
 * nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 ã€‚
 * ä¸åŒçš„ä¸‰å…ƒç»„æ˜¯ [-1,0,1] å’Œ [-1,-1,2] ã€‚
 * æ³¨æ„ï¼Œè¾“å‡ºçš„é¡ºåºå’Œä¸‰å…ƒç»„çš„é¡ºåºå¹¶ä¸é‡è¦ã€‚
 * 
 * ç¤ºä¾‹ 2ï¼š
 * è¾“å…¥ï¼šnums = [0,1,1]
 * è¾“å‡ºï¼š[]
 * è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸ä¸º 0 ã€‚
 * 
 * ç¤ºä¾‹ 3ï¼š
 * è¾“å…¥ï¼šnums = [0,0,0]
 * è¾“å‡ºï¼š[[0,0,0]]
 * è§£é‡Šï¼šå”¯ä¸€å¯èƒ½çš„ä¸‰å…ƒç»„å’Œä¸º 0 ã€‚
 * 
 * æç¤ºï¼š
 * 3 <= nums.length <= 3000
 * -105 <= nums[i] <= 105
 */

#include <iostream>
#include <vector>
#include <algorithm>

using namespace std;

class Solution {
public:
    vector<vector<int>> threeSum(vector<int>& nums) {
        
        vector<vector<int>> ret;
        int l, r;

        sort(nums.begin(), nums.end());

        for (int i=0; i<nums.size()-2; ++i) {
            
            if (i>0 && nums[i] == nums[i-1]) continue; // å…³é”®å»é‡é€»è¾‘ï¼šå¦‚æœå½“å‰å›ºå®šæ•°ä¸å‰ä¸€ä¸ªç›¸åŒï¼Œåˆ™è·³è¿‡

            l = i+1;
            r = nums.size() - 1;

            int total;
            while (l < r) {
                
                total = nums[i] + nums[l] + nums[r];
                if (total == 0) {
                    
                    ret.push_back({nums[i], nums[l], nums[r]});

                    // å·¦å³æŒ‡é’ˆå»é‡ï¼šè·³è¿‡é‡å¤çš„å…ƒç´ 
                    while (l < r && nums[l] == nums[l + 1]) l++;
                    while (l < r && nums[r] == nums[r - 1]) r--;
                    // æ‰¾åˆ°ç­”æ¡ˆåï¼ŒæŒ‡é’ˆéœ€è¦ç»§ç»­ç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªä¸åŒçš„ä½ç½®
                    l++;
                    r--;
                } else if (total < 0) {
                    ++l;
                } else {
                    --r;
                }
            }

            // ä¼˜åŒ–ï¼šå¦‚æœå½“å‰å›ºå®šæ•°å·²ç»å¤§äº0ï¼Œå› ä¸ºæ•°ç»„æœ‰åºï¼Œåé¢çš„æ•°è‚¯å®šæ›´å¤§ï¼Œä¸å¯èƒ½åŠ èµ·æ¥ç­‰äº0
            // æ³¨æ„ï¼šè¿™å¥æ”¾åœ¨å¾ªç¯æœ€åå…¶å®åªèƒ½åœ¨ä¸‹ä¸€æ¬¡å¾ªç¯ç”Ÿæ•ˆï¼Œæˆ–è€…å¯ä»¥æ”¾åœ¨å¾ªç¯å¼€å¤´
            if (nums[i] >= 0 && nums[i] > 0) { // ç¨å¾®ä¿®æ”¹é€»è¾‘ï¼Œç¡®ä¿ [0,0,0] å¯ä»¥é€šè¿‡
                 // å®é™…ä¸Šè¿™å¥æ”¾åœ¨è¿™é‡Œå¹¶ä¸å®Œå…¨ä¸¥è°¨ï¼Œå¦‚æœæ˜¯[0,0,0]ï¼Œnums[i]æ˜¯0ï¼Œbreakäº†å°±æ²¡äº†ã€‚
                 // ä½†åŸä»£ç é€»è¾‘æ˜¯æ”¾åœ¨æœ€åï¼Œå¦‚æœæ˜¯[0,0,0]ï¼Œi=0æ—¶nums[i]=0ï¼Œæ‰§è¡Œå®Œwhileååˆ¤æ–­nums[i]>=0 breakï¼Œ
                 // è¿™æ ·æ˜¯å¯¹çš„å—ï¼Ÿ[0,0,0] i=0æ—¶å¤„ç†å®Œï¼Œiè‡ªå¢ä¸º1ï¼Œä¸‹ä¸€æ¬¡å¾ªç¯å¼€å§‹å‰åˆ¤æ–­ã€‚
                 // å…¶å®é€šå¸¸å»ºè®®æ˜¯æ”¾åœ¨å¾ªç¯å¼€å§‹å¤„ï¼šif (nums[i] > 0) break;
            }
        }
        return ret;
    }
};

/**
 * --------------------------------------------------------------------------
 * ğŸ“ å­¦ä¹ ç¬”è®° & é”™è¯¯è®°å½• (Notes & Mistakes)
 * --------------------------------------------------------------------------
 * 
 * [åœ¨æ­¤å¤„è®°å½•ä½ çš„è§£é¢˜æ€è·¯ã€é‡åˆ°çš„é”™è¯¯ã€ä»¥åŠä¿®æ­£è¿‡ç¨‹]
 * 
 * 1. é”™è¯¯è®°å½•ï¼š
 *    - æ¼æ‰äº†å¤–å±‚å¾ªç¯çš„å»é‡é€»è¾‘ï¼š`if (i>0 && nums[i] == nums[i-1]) continue;`
 *      å¦‚æœä¸åŠ è¿™ä¸€å¥ï¼Œå½“è¾“å…¥ä¸º `[-1, -1, 0, 1]` æ—¶ï¼Œç¬¬ä¸€ä¸ª -1 ä¼šæ‰¾åˆ° `[-1, 0, 1]`ï¼Œç¬¬äºŒä¸ª -1 ä¹Ÿä¼šæ‰¾åˆ° `[-1, 0, 1]`ï¼Œå¯¼è‡´ç»“æœé‡å¤ã€‚
 * 
 * 2. æ ¸å¿ƒæ€è·¯ (æ’åº + åŒæŒ‡é’ˆ)ï¼š
 *    - æ’åºï¼šä¸ºäº†æ–¹ä¾¿å»é‡å’Œä½¿ç”¨åŒæŒ‡é’ˆã€‚
 *    - å›ºå®šä¸€ä¸ªæ•° `nums[i]`ï¼Œç„¶åä½¿ç”¨åŒæŒ‡é’ˆ `l`, `r` åœ¨ `i+1` åˆ°æœ«å°¾çš„èŒƒå›´å†…å¯»æ‰¾ `nums[l] + nums[r] == -nums[i]`ã€‚
 *    - å»é‡ç»†èŠ‚ï¼š
 *      1. å¤–å±‚å¾ªç¯ `i` çš„å»é‡ï¼šä¿è¯å›ºå®šçš„ç¬¬ä¸€ä¸ªæ•°ä¸é‡å¤ã€‚
 *      2. å†…å±‚åŒæŒ‡é’ˆæ‰¾åˆ°ç­”æ¡ˆåçš„å»é‡ï¼š`while (l<r && nums[l] == nums[++l]);` å’Œ `while (l<r && nums[r] == nums[--r]);`ï¼Œä¿è¯ç¬¬äºŒã€ç¬¬ä¸‰ä¸ªæ•°ä¸é‡å¤ã€‚
 * 
 * 3. ä»£ç ç»†èŠ‚è®¨è®ºï¼š
 *    - **å…³äº `nums[l] == nums[++l]` çš„è­¦å‘Š**ï¼š
 *      - åŸä»£ç ä¸­çš„ `while (l<r && nums[l] == nums[++l]);` è§¦å‘äº†ç¼–è¯‘å™¨è­¦å‘Š "unsequenced modification and access to 'l'"ã€‚
 *      - åŸå› ï¼šåœ¨ C++ æ ‡å‡†ä¸­ï¼Œåœ¨ä¸€ä¸ªè¡¨è¾¾å¼ä¸­åŒæ—¶ä¿®æ”¹å˜é‡ï¼ˆ`++l`ï¼‰å’Œè®¿é—®è¯¥å˜é‡ï¼ˆ`nums[l]`ï¼‰ï¼Œä¸”ä¸¤è€…æ²¡æœ‰é¡ºåºç‚¹ï¼ˆsequence pointï¼‰åˆ†éš”ï¼Œå±äº**æœªå®šä¹‰è¡Œä¸º (Undefined Behavior)**ã€‚è™½ç„¶åœ¨æŸäº›ç¼–è¯‘å™¨ä¸Šèƒ½è¿è¡Œï¼Œä½†ä¸å¯ç§»æ¤ä¸”å±é™©ã€‚
 *      - ä¿®æ­£ï¼šæ‹†åˆ†ä¸º `while (l < r && nums[l] == nums[l + 1]) l++;`ï¼Œç„¶åæ‰‹åŠ¨ `l++;`ã€‚
 *
 *    - åŸä»£ç æœ€åçš„ `if (nums[i] >= 0) { break; }` æ”¾åœ¨å¾ªç¯æœ«å°¾ã€‚
 *      - å¯¹äº `[0,0,0]`ï¼ši=0, nums[0]=0ã€‚è¿›å…¥whileå¾ªç¯æ‰¾åˆ°[0,0,0]ã€‚é€€å‡ºwhileã€‚æ£€æŸ¥nums[0]>=0ï¼Œbreakã€‚ç»“æœæ­£ç¡®ã€‚
 *      - å¯¹äº `[-1, 0, 1]`ï¼ši=0, nums[0]=-1ã€‚å¤„ç†å®Œã€‚i=1, nums[1]=0ã€‚å¤„ç†å®Œã€‚æ£€æŸ¥nums[1]>=0ï¼Œbreakã€‚ç»“æœæ­£ç¡®ã€‚
 *      - ä¸è¿‡æ›´å¸¸è§çš„ä¼˜åŒ–æ˜¯æ”¾åœ¨å¾ªç¯å¼€å¤´ï¼š`if (nums[i] > 0) break;`ã€‚å› ä¸ºå¦‚æœå½“å‰æ•°å¤§äº0ï¼Œåé¢æ›´ä¸å¯èƒ½å‡‘å‡º0ã€‚
 * 
 * --------------------------------------------------------------------------
 */

// è¾…åŠ©å‡½æ•°ï¼šæ‰“å° vector<vector<int>>
void printResult(const vector<vector<int>>& result) {
    cout << "[" << endl;
    for (const auto& group : result) {
        cout << "  [";
        for (int i = 0; i < group.size(); ++i) {
            cout << group[i];
            if (i < group.size() - 1) cout << ", ";
        }
        cout << "]" << endl;
    }
    cout << "]" << endl;
}

// æµ‹è¯•ä»£ç 
int main() {
    Solution solution;

    // ç¤ºä¾‹ 1
    vector<int> nums1 = {-1, 0, 1, 2, -1, -4};
    cout << "Input: nums = [-1, 0, 1, 2, -1, -4]" << endl;
    vector<vector<int>> result1 = solution.threeSum(nums1);
    cout << "Output: ";
    printResult(result1);

    // ç¤ºä¾‹ 2
    vector<int> nums2 = {0, 1, 1};
    cout << "\nInput: nums = [0, 1, 1]" << endl;
    vector<vector<int>> result2 = solution.threeSum(nums2);
    cout << "Output: ";
    printResult(result2);

    // ç¤ºä¾‹ 3
    vector<int> nums3 = {0, 0, 0};
    cout << "\nInput: nums = [0, 0, 0]" << endl;
    vector<vector<int>> result3 = solution.threeSum(nums3);
    cout << "Output: ";
    printResult(result3);

    return 0;
}